<lift:surround with="common-layout" at="content">
<div  >
  <head>
    <title>Rudder - Technique Editor</title>
    <link type="text/css" rel="stylesheet" data-lift="with-cached-resource" href="/style/rudder/rudder-technique-editor.css"/>
    <script data-lift="with-cached-resource" src="/javascript/rudder/elm/rudder-editor.js"></script>

  </head>

  <div id="technique-editor">
  <script>
  var main = document.getElementById("technique-editor")
  var initValues = {
    contextPath : contextPath
  };
  var app  = Elm.Editor.init({node: main, flags: initValues});
  app.ports.copy.subscribe(function(value) {
     navigator.clipboard.writeText(value).then(function(){  console.log('Async: Copying to clipboard was successful!');}, function() {})()
  });


  var port = app.ports.response
  app.ports.store.subscribe(function(kv) {
  console.log(kv);

          var key = kv[0];
          var json = kv[1];
     localStorage.setItem(key, JSON.stringify(json));
  });

  app.ports.get.subscribe(function(key) {
    var val = undefined;
          try {
            val = JSON.parse(localStorage.getItem(key))
          } catch (e) {}
          port.send(val)

  });

    $(document).on('mouseover','.popover-bs',function(){
      $(this).bsPopover('show');
    });
    $('.tooltip-bs').bsTooltip();
</script>
  </div>
</div>
</lift:surround>